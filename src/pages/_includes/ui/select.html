{% assign id = include.id %}

{% if id %}

<select type="text" class="form-select{% if include.class %} {{ include.class }}{% endif %}{% if include.state %} is-{{ include.state }}{% endif %}"{% if placeholder %} placeholder="{{ placeholder }}"{% endif %} id="select-{{ id }}" value="{{ value }}">
	{% if include.values %}
		{% assign values = include.values | split: ',' %}

		{% for value in values %}
			<option value="{{ value }}">{{ value }}</option>
		{% endfor %}
	{% else %}
		{% assign key = include.key | default: 'people' %}
		{% assign data = site.data.selects[key] %}
		{% assign options = data.options %}

		{% if data.data == 'people' %}
			{% for person in site.data.people %}
				<option value="{{ person.id }}">{{ person.full_name }}</option>
			{% endfor %}

		{% else %}
			{% for option in options %}
				{% if option.first %}
					<option value="{{ option[0] }}">{{ option[1].name }}</option>
				{% else %}
					<option value="{{ option }}">{{ option }}</option>
				{% endif %}
			{% endfor %}
		{% endif %}
	{% endif %}
</select>


{% capture script %}
<script>
	// @formatter:off
	document.addEventListener("DOMContentLoaded", function () {
		{% if jekyll.environment == 'development' %}
		window.tabler_select = window.tabler_select || {};
		{% endif %}

		var el;
		window.Choices && ({% if jekyll.environment == 'development' %}window.tabler_select["select-{{ id }}"] = {% endif %}new Choices(el = document.getElementById('select-{{ id }}'), {
			classNames: {
				containerInner: el.className,
				input: 'form-control',
				inputCloned: 'form-control-sm',
				listDropdown: 'dropdown-menu',
				itemChoice: 'dropdown-item',
				activeState: 'show',
				selectedState: 'active',
			},
			shouldSort: false,
			{% unless include.show-search %}searchEnabled: false,{% endunless %}
		}));

	});
	// @formatter:on
</script>
{% endcapture %}


{% if include.show-scripts %}
{{ script }}
{% else %}
{% capture_global scripts %}
{{ script }}
{% endcapture_global %}
{% endif %}

{% endif %}