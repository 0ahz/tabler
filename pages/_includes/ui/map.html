{% assign id = include.map-id %}
{% assign data = site.data.maps[id] %}

{% if data %}
	<div class="embed-responsive embed-responsive-{{ data.ratio | default: include.ratio | default: '16by9' }}">
		<div class="embed-responsive-item">
			<div id="map-{{ id }}" class="w-100 h-100"></div>
		</div>
	</div>

	{% append_lib mapbox %}
	{% capture_global scripts %}
	<script>
		// @formatter:off
		document.addEventListener("DOMContentLoaded", function() {
			mapboxgl.accessToken = '{{ site.mapbox_key }}';
			var map = new mapboxgl.Map({
				container: 'map-{{ id }}',
				style: 'mapbox://styles/mapbox/{{ data.style | default: "streets-v11" }}',
				zoom: {{ data.zoom | default: 13 }},
				{% if data.center %}
					center: [{{ data.center[1] }}, {{ data.center[0] }}],
				{% else %}
					center: [13.404900, 52.518827],
				{% endif %}
			});
		});
		// @formatter:on
	</script>
	{% endcapture_global %}
{% endif %}